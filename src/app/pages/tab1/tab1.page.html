<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Encuesta Transporte</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <form [formGroup]="answerForm" (submit)="submitForm()" class="form-wrapper">

    <!-- Pregunta 1 -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Pregunta 1</ion-card-title>
        <ion-card-subtitle>Marca una opción</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>¿Qué tipo de transporte utilizas para llegar a tu trabajo?</p>

        <ion-select
          label="Tipo de transporte"
          label-placement="floating"
          fill="outline"
          placeholder="Selecciona uno"
          formControlName="idTipoTransporte"
          errorText="Debe seleccionar una opción">
          <ion-select-option *ngFor="let item of tipoTransporte" [value]="item.id">
            {{ item.nombre }}
          </ion-select-option>
        </ion-select>
      </ion-card-content>
    </ion-card>

    <!-- Pregunta 2 -->
    <ion-card *ngIf="answerForm.get('idTipoTransporte')?.value == 2">
      <ion-card-header>
        <ion-card-title>Pregunta 2</ion-card-title>
        <ion-card-subtitle>Marca una opción</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>¿Compartes tu transporte privado?</p>

        <ion-select
          label="¿Es compartido?"
          label-placement="floating"
          fill="outline"
          formControlName="esCompartido"
          placeholder="Selecciona uno"
          errorText="Debe seleccionar una opción">
          <ion-select-option [value]="true">Sí</ion-select-option>
          <ion-select-option [value]="false">No</ion-select-option>
        </ion-select>
      </ion-card-content>
    </ion-card>

    <!-- Pregunta 3 -->
    <ion-card *ngIf="answerForm.get('esCompartido')?.value == true">
      <ion-card-header>
        <ion-card-title>Pregunta 3</ion-card-title>
        <ion-card-subtitle>Marca una opción</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>¿Cuál es tu medio de transporte más utilizado?</p>

        <ion-select
          label="Transporte"
          label-placement="floating"
          fill="outline"
          formControlName="idTransporte"
          placeholder="Selecciona uno"
          errorText="Debe seleccionar una opción">
          <ion-select-option *ngFor="let item of transporte" [value]="item.id">
            {{ item.nombre }}
          </ion-select-option>
        </ion-select>
      </ion-card-content>
    </ion-card>

    <!-- Pregunta 4 -->
    <ion-card *ngIf="answerForm.get('esCompartido')?.value == true">
      <ion-card-header>
        <ion-card-title>Pregunta 4</ion-card-title>
        <ion-card-subtitle>Escribe tu respuesta</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>¿Cuántos kilómetros recorres diariamente (aproximadamente)?</p>

        <ion-input
          label="KM recorridos"
          type="number"
          label-placement="floating"
          fill="outline"
          formControlName="km_recorrido"
          errorText="Debe ingresar un número"
          placeholder="Ejemplo: 4.5">
        </ion-input>
      </ion-card-content>
    </ion-card>

    <!-- Pregunta 5 -->
    <ion-card *ngIf="answerForm.get('esCompartido')?.value == true">
      <ion-card-header>
        <ion-card-title>Pregunta 5</ion-card-title>
        <ion-card-subtitle>Escribe tu respuesta</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>¿Cuánto tiempo demora diariamente en el traslado?</p>

        <ion-input
          label="Tiempo recorrido (minutos)"
          type="number"
          label-placement="floating"
          fill="outline"
          formControlName="minutos_recorrido"
          errorText="Debe ingresar un número"
          placeholder="Ejemplo: 90">
        </ion-input>
      </ion-card-content>
    </ion-card>

    <!-- Pregunta 6 -->
    <ion-card *ngIf="answerForm.get('esCompartido')?.value == true">
      <ion-card-header>
        <ion-card-title>Pregunta 6</ion-card-title>
        <ion-card-subtitle>Escribe tu respuesta</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>¿Cuántos días trabajas a la semana?</p>

        <ion-input
          label="Días de trabajo"
          type="number"
          label-placement="floating"
          fill="outline"
          formControlName="dias_trabajo"
          errorText="Debe ingresar un número"
          placeholder="Ejemplo: 5">
        </ion-input>
      </ion-card-content>
    </ion-card>

    <!-- Botones -->
    <div class="button-group">
      <ion-button type="submit" [disabled]="!answerForm.valid" expand="block" color="primary">
        Enviar
      </ion-button>
      <ion-button (click)="backToLogin()" expand="block" color="medium">
        Volver
      </ion-button>
    </div>

  </form>

</ion-content>
